<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta name="author" content="Connor Leech"><title>Build a guestbook application with Laravel 5</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="cleartype" content="on"><meta name="MobileOptimized" content="320"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="description" content="Guestbook built with Laravel 5 API. Follow along with @rachidlaasri Scotch.io tutorial"><meta name="keywords" content="laravel, aws, javascript, php, developer, software engineer, web development, software, node.js, serverless, lambda, san francisco, bay area, east bay, vue, vuejs, vue.js, vue 2, laravel 5, amazon web services"><meta name="zipcode" content="94501"><meta name="city" content="Alameda"><meta name="state" content="California"><meta name="country" content="United States"><meta name="language" content="EN"><meta property="og:site_name" content="Connor Leech Blog | Node.js, Laravel, AWS"><meta property="og:description" content="Get notified about the latest trends in web development, career growth and cloud infrastructure. I send emails about twice a month covering tutorials in Node.js, Laravel, AWS and Vue.js"><meta property="og:image" content="http://i0.kym-cdn.com/photos/images/original/001/018/899/936.jpg"><meta property="og:title" content="Build a guestbook application with Laravel 5"><meta property="og:description" content="Guestbook built with Laravel 5 API. Follow along with @rachidlaasri Scotch.io tutorial"><!-- Favicon--><link rel="shortcut icon" type="image/png" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><!-- Vendor Fonts--><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/bower_components/animate.css/animate.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Yantramanav" rel="stylesheet"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries--><!-- WARNING: Respond.js doesn't work if you view the page via file://--><!--if lt IE 9script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
--><link rel="alternate" href="/atom.xml" title="config.title" type="application/rss2.xml"><link rel="stylesheet" href="/css/main.css"></head><body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="post"><!-- Nav--><nav role="navigation" class="navbar navbar-custom navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="/" class="navbar-brand"><img src="/images/employbl_logo.svg" style="height:100px; width:100px;"></a><button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle"><i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse navbar-left navbar-main-collapse"></div><div class="collapse navbar-collapse navbar-right navbar-main-collapse"><ul class="nav navbar-nav"><li><a href="/blog" class="page-scroll">Blog</a></li><li><a href="/#about" class="page-scroll">About</a></li></ul></div></div></nav><main id="content"><div id="archive" class="container"><div class="row"> <div class="col-sm-2 col-md-2"><h3>Categories</h3><a href="/blog"><p>All</p></a><a href="/categories/Writing"><p>Writing</p></a><a href="/categories/Rails"><p>Rails</p></a><a href="/categories/Javascript"><p>Javascript</p></a><a href="/categories/Laravel"><p>Laravel</p></a><a href="/categories/Angular"><p>Angular</p></a><a href="/categories/Django"><p>Django</p></a><a href="/categories/Programming"><p>Programming</p></a><a href="/categories/AWS"><p>AWS</p></a></div><div class="col-xs-12 col-md-8"><article class="post"><div class="row"><div class="col-md-10 col-md-offset-1"><h1 class="post-title">Build a guestbook application with Laravel 5</h1></div></div><div class="row"><div class="post-meta"><h5><span>Connor Leech</span><span class="date"> - Nov 12, 2017&ensp;in<span class="post-categories">&ensp;<a href="/categories/Laravel/" class="post-category">Laravel</a></span></span></h5><a target="_blank" href="http://twitter.com/intent/tweet?status=Build a guestbook application with Laravel 5 by @Connor11528+http://connorleech.info/blog/guestbook-application-with-Laravel-5/" class="btn btn-primary social-share twitter"><i class="fa fa-twitter fa-2x"><span class="hidden-xs"></span></i></a><a target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http://connorleech.info/blog/guestbook-application-with-Laravel-5/&amp;title=Build a guestbook application with Laravel 5&amp;source=connorleech.info" class="btn btn-primary social-share linkedin"><i class="fa fa-linkedin fa-2x"><span class="hidden-xs"></span></i></a></div></div><div class="post-body"><blockquote>
<p>Following along with <a href="https://github.com/RachidLaasri" target="_blank" rel="external">@rachidlaasri</a> excellent tutorial on scotch.io: <a href="https://scotch.io/tutorials/build-a-guestbook-with-laravel-and-vuejs" target="_blank" rel="external">Build a Guestbook with Laravel and Vue.js</a></p>
</blockquote>
<p><strong>tl;dr</strong> - source code is here: <a href="https://github.com/connor11528/guestbook" target="_blank" rel="external">https://github.com/connor11528/guestbook</a></p>
<h3 id="Generate-the-application"><a href="#Generate-the-application" class="headerlink" title="Generate the application"></a>Generate the application</h3><p>Use <a href="https://gist.github.com/connor11528/fcfbdb63bc9633a54f40f0a66e3d3f2e" target="_blank" rel="external">this script</a> to quickly scaffold a Laravel 5 app.</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">./create_laravel_app.<span class="keyword">sh</span> guestbook</div><div class="line"><span class="keyword">cd</span> guestbook</div><div class="line">php artisan serve</div><div class="line">npm <span class="keyword">run</span> watch</div></pre></td></tr></table></figure>
<h3 id="Add-a-database"><a href="#Add-a-database" class="headerlink" title="Add a database"></a>Add a database</h3><p>Add sqlite database:</p>
<figure class="highlight irpf90"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">touch</span> database/database.sqlite</div></pre></td></tr></table></figure>
<p>The only line you want in the <strong>.env</strong> file related to the db is: <code>DB_CONNECTION=sqlite</code>, get rid of the host, port, username business.</p>
<p>Sqlite is great for development but you probably wouldn’t use it for a production app. You could go with MySQL.
If you’re interested in hooking up Laravel 5 to MySQL check this tutorial:</p>
<p><a href="http://connorleech.info/blog/Build-an-online-forum-with-Laravel%E2%80%8A-Initial-Setup-and-Seeding-Part-1/">Laravel 5 Initial Database Setup and Seeding</a></p>
<p><code>&lt;/shameless-plug&gt;</code></p>
<h3 id="Seeding"><a href="#Seeding" class="headerlink" title="Seeding"></a>Seeding</h3><p>In the tutorial we set up a model factory for generating Signatures in our database and use tinker to generate the records. Another approach is to use database seeders.
Database seeders populate our database by running <code>php artisan db:seed</code>. This calls <strong>database/seeds/DatabaseSeeder.php</strong>. That file has a class that extends the Seeder class. 
In there is a run function that calls a seeder for generating Signatures:</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">public function <span class="keyword">run</span>()</div><div class="line">&#123;</div><div class="line">    <span class="variable">$this</span>-&gt;call(SignaturesTableSeeder::<span class="keyword">class</span>);</div><div class="line">&#125;</div><div class="line">``` </div><div class="line"></div><div class="line"><span class="keyword">Generate</span> that seeder <span class="keyword">by</span> running `php artisan make:seeder SignaturesTableSeeder` and <span class="keyword">include</span> a call to the model factory that's outlined <span class="keyword">in</span> the [scotch <span class="keyword">tutorial</span>](https:<span class="comment">//scotch.io/tutorials/build-a-guestbook-with-laravel-and-vuejs).</span></div></pre></td></tr></table></figure>
<p>public function run()
{
    factory(App\Signature::class, 100)-&gt;create();
}
<figure class="highlight smali"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">To<span class="built_in"> check </span>and make sure it worked we could view the db in a GUI such as Sequel Pro<span class="built_in"> or </span>use tinker like:</div></pre></td></tr></table></figure></p>
<p>php artisan tinker</p>
<blockquote>
<p>\DB::table(‘signatures’)-&gt;count(); // view # of records
\DB::table(‘signatures’)-&gt;get(); // view all records
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### Routes and Controllers</div><div class="line"></div><div class="line"><span class="keyword">In</span> this section we <span class="keyword">set</span> up controllers <span class="keyword">for</span> reporting signatures, displaying them, adding them and displaying <span class="keyword">an</span> individual resource. We're building this <span class="keyword">as</span> <span class="keyword">an</span> API <span class="keyword">so</span> I thought it was cool</div><div class="line">that the author namespaced the controllers into <span class="keyword">an</span> Api folder when creating them. That was <span class="keyword">as</span> simple <span class="keyword">as</span> `php artisan make:controller Api/SignatureController`.</div><div class="line">Additionally, we <span class="keyword">use</span> a Laravel [resource controller](https:<span class="comment">//laravel.com/docs/5.5/controllers#resource-controllers) but specify that we do not want ALL the routes, only a few:</span></div></pre></td></tr></table></figure></p>
</blockquote>
<p>Route::resource(‘signatures’, ‘Api\SignatureController’)-&gt;only([‘index’, ‘store’, ‘show’]);
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Most interestingly, <span class="keyword">in</span> our controller we make calls <span class="keyword">to</span> <span class="keyword">and</span> <span class="keyword">return</span> instances <span class="keyword">of</span> `SignatureResource`, which we haven<span class="symbol">'t</span> defined yet.</div><div class="line"></div><div class="line">There<span class="symbol">'s</span> also a nifty call <span class="keyword">to</span> get the latest Signatures <span class="keyword">and</span> ignore <span class="keyword">all</span> signatures that have been flagged:</div></pre></td></tr></table></figure></p>
<p>$signatures = Signature::latest()
            -&gt;ignoreFlagged()
            -&gt;paginate(20);
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">The `ignoreFlagged` method <span class="keyword">call</span> <span class="keyword">is</span> a custom <span class="keyword">query</span> <span class="keyword">scope</span> that we <span class="keyword">define</span> <span class="keyword">with</span> the convention <span class="keyword">of</span> <span class="string">"scopeMethodNameInCamelCase"</span>. We defined the custom <span class="keyword">query</span> <span class="keyword">scope</span> <span class="keyword">in</span> the Signature <span class="keyword">model</span>:</div></pre></td></tr></table></figure></p>
<p>public function scopeIgnoreFlagged($query)
{
    return $query-&gt;where(‘flagged_at’, null);
}
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">The calls to latest() and paginate() are default parts of the [<span class="string">Eloquent ORM</span>](<span class="link">https://laravel.com/docs/5.5/eloquent</span>).</div><div class="line"></div><div class="line">If you're new to Laravel it is also worth checking out the [<span class="string">route model binding</span>](<span class="link">https://laravel.com/docs/5.5/routing#route-model-binding</span>) included in the reporting signature route and controller.</div><div class="line"></div><div class="line">The route looks like:</div></pre></td></tr></table></figure></p>
<p>Route::put(‘signatures/{signature}/report’, ‘Api\ReportSignature@update’);
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Including the signature like this actually gives us access <span class="keyword">to</span> the individual signature <span class="keyword">in</span> our controller. So <span class="keyword">in</span> the update method we pass <span class="keyword">in</span> the database<span class="built_in"> instance </span>of the signature that we want <span class="keyword">to</span> flag:</div></pre></td></tr></table></figure></p>
<p>public function update(Signature $signature)
{
    $signature-&gt;flag();</p>
<pre><code>return $signature;
</code></pre><p>}
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Flag <span class="keyword">is</span> a custom method we define <span class="keyword">in</span> the Signature model.</div><div class="line"></div><div class="line">### The Signature Resource </div><div class="line"></div><div class="line">Eloquent Resources ([docs](https://laravel.com/docs/<span class="number">5.5</span>/eloquent-resources)) are <span class="keyword">new</span> <span class="keyword">in</span> Laravel <span class="number">5.5</span>. Resources are a middle layer between your database <span class="keyword">and</span> the JSON responses you send <span class="keyword">out</span> <span class="keyword">to</span> <span class="keyword">end</span> users.</div><div class="line"><span class="keyword">In</span> our <span class="keyword">case</span> we<span class="symbol">'re</span> going <span class="keyword">to</span> modify the data so we don<span class="symbol">'t</span> send <span class="keyword">out</span> people<span class="symbol">'s</span> email addresses <span class="keyword">and</span> send an avatar <span class="keyword">for</span> their image.</div><div class="line"></div><div class="line">&gt; Jeffery Way posted a Laracast about API Resources: [What<span class="symbol">'s</span> <span class="keyword">New</span> <span class="keyword">in</span> Laravel <span class="number">5.5</span>: API Resources](https://laracasts.com/series/whats-<span class="keyword">new</span>-<span class="keyword">in</span>-laravel-<span class="number">5</span>-<span class="number">5</span>/episodes/<span class="number">20</span>)</div><div class="line"></div><div class="line"><span class="keyword">In</span> order <span class="keyword">to</span> define a custom `avatar` <span class="keyword">attribute</span> <span class="keyword">for</span> signature instances we <span class="keyword">use</span> the synatax <span class="string">"getAttributNameAttribute"</span> syntax <span class="keyword">for</span> <span class="keyword">out</span> <span class="keyword">function</span>:</div></pre></td></tr></table></figure></p>
<p>public function getAvatarAttribute()
{
    return sprintf(‘<a href="https://www.gravatar.com/avatar/%s?s=100" target="_blank" rel="external">https://www.gravatar.com/avatar/%s?s=100</a>‘, md5($this-&gt;email));
}
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">`sprintf` returns <span class="keyword">a</span> formatted <span class="keyword">string</span> <span class="keyword">in</span> PHP <span class="keyword">and</span> `md5` creates <span class="keyword">a</span> hash. Gravatar is <span class="keyword">a</span> service that grabs <span class="keyword">a</span> photo <span class="keyword">for</span> <span class="keyword">the</span> user based <span class="keyword">on</span> <span class="title">their</span> <span class="title">email</span> <span class="title">address</span>.</div><div class="line"></div><div class="line"><span class="comment">### Vue.js frontend</span></div><div class="line"></div><div class="line">@rachidlaasri builds out <span class="keyword">an</span> awesome Vue.js frontend <span class="keyword">and</span> takes advantage <span class="keyword">of</span> <span class="keyword">a</span> vue-paginate prebuilt component ([avail here](<span class="keyword">https</span>://github.com/lokyoung/vuejs-paginate)). The pagination logic is especially interesting <span class="keyword">in</span> <span class="keyword">the</span> Signatures vue component. </div><div class="line">Reporting <span class="keyword">a</span> signature <span class="keyword">and</span> <span class="keyword">then</span> removing <span class="keyword">it</span> <span class="built_in">from</span> <span class="keyword">the</span> UI <span class="keyword">with</span> lodash is pretty neat also:</div></pre></td></tr></table></figure></p>
<p>report(id) {
    if(confirm(‘Are you sure you want to report this signature?’)) {
        axios.put(‘api/signatures/‘+id+’/report’)
        .then(response =&gt; this.removeSignature(id));
    }
},</p>
<p>removeSignature(id) {
    this.signatures = _.remove(this.signatures, function (signature) {
        return signature.id !== id;
    });
}
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Here we <span class="keyword">take</span> advantage <span class="keyword">of</span> lodash [<span class="keyword">remove</span> <span class="function"><span class="keyword">method</span>]<span class="params">(https://lodash.com/docs/#<span class="keyword">remove</span>)</span>.</span></div><div class="line"></div><div class="line"><span class="title">On</span> <span class="title">our</span> <span class="title">SignatureForm</span>.<span class="title">vue</span> <span class="title">there</span> <span class="title">is</span> <span class="title">a</span> <span class="title">success</span> <span class="title">message</span> <span class="title">that</span> <span class="title">displays</span> <span class="title">conditionally</span> <span class="title">when</span> <span class="title">our</span> <span class="title">signature</span> <span class="title">is</span> <span class="title">submitted</span>:</div></pre></td></tr></table></figure></p>
<p><div class="alert alert-success" v-if="saved">
    <strong>Success!</strong> Your signature has been saved successfully.
</div>
```</p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>Overall very good tutorial about building an API with Laravel 5.5 that hooks up to a Vue 2 frontend. We used a lot of Laravel configuration concepts to extend our models and even built a resource layer to modify the JSON that we return to Vue.</p>
<p>Make sure to check out the full tutorial <a href="https://scotch.io/tutorials/build-a-guestbook-with-laravel-and-vuejs" target="_blank" rel="external">on Scotch.io</a></p>
</div><div id="disqus_thread"></div></article><nav class="pagination"><a href="/blog/Debugging-and-development-tools-for-Laravel-5/" title="Debugging and development tools for Laravel 5" class="btn-default entry-pagination__link entry-pagination__link--next">Next</a></nav></div></div></div></main><footer class="footer"><div class="container"><div class="row"><div class="col-sm-6"><h4>Connor11528 dev newsletter mailing list</h4><ul><li><form action="//herokuapp.us14.list-manage.com/subscribe/post?u=42dd73a709fbadb4a29ef1d0d&amp;amp;id=b77fdad58d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate class="validate"><div class="input-group"><input type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="Enter your email here" class="required email form-control input-lg"><div id="mce-error-response" style="display:none" class="response"></div><div id="mce-success-response" style="display:none" class="response"></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_42dd73a709fbadb4a29ef1d0d_b77fdad58d" tabindex="-1" value=""></div><span class="input-group-btn"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-primary btn-lg"></span></div></form></li></ul></div><div class="col-sm-2 col-sm-offset-1"><h4>Connect</h4><ul><li> <a target="_blank" href="https://github.com/connor11528">GitHub</a></li><li> <a target="_blank" href="https://www.linkedin.com/in/connorleech">LinkedIn</a></li><li> <a target="_blank" href="https://twitter.com/connor11528">Twitter</a></li><li><a target="_blank" href="https://stackoverflow.com/users/2031033/connor-leech">Stackoverflow</a></li><li><a target="_blank" href="https://plus.google.com/u/0/+ConnorLeech">Google+</a></li></ul></div><div class="col-sm-3"><h4>Email</h4><ul><li> <a href="mailto:connorleech@gmail.com">connorleech@gmail.com</a></li></ul></div></div></div></footer><!-- vendor--><script src="/bower_components/jquery/dist/jquery.min.js"></script><script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/bower_components/wow/dist/wow.min.js"></script><script src="/bower_components/jquery-easing/jquery.easing.min.js"></script><script src="/bower_components/jquery-color/jquery.color.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/ScrollMagic.min.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/plugins/debug.addIndicators.min.js"></script><script src="/bower_components/vivus/dist/vivus.min.js"></script><!-- require modules--><script src="/js/require.js"></script><script src="/js/app.js"></script><!-- analytics--><!-- disqus--><script>(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://connorleech.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></body></html>