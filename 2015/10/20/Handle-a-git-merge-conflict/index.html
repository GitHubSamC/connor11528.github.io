<!DOCTYPE html><html lang="en"><head><meta name="author" content="Connor Leech"><title>Handle a git merge conflict</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="cleartype" content="on"><meta name="MobileOptimized" content="320"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="description" content="Computer Lab is a full-service dev shop focused on the development of data-driven JavaScript apps. We engineer solutions that shape and accelerate our clients' goals in media, tech, healthcare and beyond."><meta name="keywords" content="django, react native, mobile, digital consultancy, digital agency, design agency, web development, software, branding, design, linux, branding, logos, react, python, web design, developers, new york, new york city, brooklyn"><meta name="google-site-verification" content="cAcSU62Yp5NwS2tAG5wbbYETGM7j-kmqPjgiNlqLOs8"><meta name="copyright" content="2016-7 Computer Lab"><meta name="zipcode" content="10013"><meta name="city" content="New York"><meta name="state" content="New York"><meta name="country" content="United States"><meta name="language" content="EN"><meta property="og:site_name" content="Computer Lab"><meta property="og:title" content="Handle a git merge conflict"><meta property="og:image" content="https://computerlab.io/images/computer-wide.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@computerlab_"><meta name="twitter:domain" content="http://computerlab.io"><meta name="twitter:image" content="https://computerlab.io/images/computer-wide.png"><meta name="twitter:description" content="Computer Lab is a full-service dev shop focused on the development of data-driven JavaScript apps. We engineer solutions that shape and accelerate our clients' goals in media, tech, healthcare and beyond."><!-- Vendor Fonts--><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/bower_components/animate.css/animate.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Yantramanav" rel="stylesheet"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries--><!-- WARNING: Respond.js doesn't work if you view the page via file://--><!--if lt IE 9script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
--><link rel="alternate" href="/atom.xml" title="config.title" type="application/rss2.xml"><link rel="stylesheet" href="/css/main.css"><script type="text/javascript">window.intercomSettings = {
  app_id: "m4bciby9"
};
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/m4bciby9';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script></head><body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="post"><!-- Nav--><nav role="navigation" class="navbar navbar-custom navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="/" class="navbar-brand"><img src="/images/employbl_logo.svg" style="height:100px; width:100px;"></a><button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle"><i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse navbar-left navbar-main-collapse"></div><div class="collapse navbar-collapse navbar-right navbar-main-collapse"><ul class="nav navbar-nav"><li><a href="/blog" class="page-scroll">Blog</a></li><li><a href="/#about" class="page-scroll">About</a></li></ul></div></div></nav><main id="content"><div id="archive" class="container"><div class="row"> <div class="col-xs-12 col-md-8 col-md-offset-2"><article class="post"><div class="row"><div class="col-md-10 col-md-offset-1"><h1 class="post-title">Handle a git merge conflict</h1></div></div><div class="row"><div class="post-meta"><h5><span></span><span class="date"> - Oct 20, 2015</span></h5></div></div><div class="post-body"><figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">mkdir</span> mergeConflicting</div><div class="line"><span class="built_in">cd</span> mergeConflicting</div><div class="line">touch play.js</div></pre></td></tr></table></figure>
<p>add some random code. This creates a gulp web server (after you run npm install):</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">  connect = <span class="built_in">require</span>(<span class="string">'gulp-connect'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'webserver'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  connect.server(&#123;</div><div class="line">    <span class="attr">livereload</span>: <span class="literal">true</span></div><div class="line">  &#125;);</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'webserver'</span>]);</div></pre></td></tr></table></figure>
<p>Then add the files to .git and commit the changes:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">add</span><span class="bash"> -A</span></div><div class="line">git commit -m <span class="string">'add gulp process'</span></div></pre></td></tr></table></figure>
<p>All of this is standard. I’ve learned not to work on the master branch. So to create a new branch named develop and start working on it run:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout -<span class="selector-tag">b</span> develop</div></pre></td></tr></table></figure>
<p>Now we’re on the develop branch and we’ll make some changes. We’ll make some changes to master. When we try to merge develop into master we will have a merge conflict that we will resolve.</p>
<p>I added some more random tasks from the gulp API docs that changes lines 5 through 11.
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">add</span><span class="bash"> -A</span></div><div class="line">git commit -m <span class="string">'add gulp task on develop branch'</span></div></pre></td></tr></table></figure></p>
<p>Now I’ll go back to master, add some different code on the same lines and simulate a merge conflict.</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout <span class="literal">master</span></div></pre></td></tr></table></figure>
<p>Add some new stuff
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git add -A</div><div class="line">git <span class="keyword">commit</span> -m <span class="string">'make changes on master branch'</span></div><div class="line">git <span class="keyword">status</span></div><div class="line"><span class="keyword">On</span> branch <span class="keyword">master</span></div><div class="line"><span class="keyword">nothing</span> <span class="keyword">to</span> <span class="keyword">commit</span>, working <span class="keyword">directory</span> clean</div></pre></td></tr></table></figure></p>
<p>Cool, so everything is gravy on our respective branches. When I try to merge develop into master though we’ll get a conflict! Git does not know if it should display the file as I have it on master or as I have it on develop. We changed the same lines!</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">merge</span> develop</div><div class="line"><span class="keyword">Auto</span>-merging play.js</div><div class="line">CONFLICT (<span class="keyword">content</span>): <span class="keyword">Merge</span> conflict <span class="keyword">in</span> play.js</div><div class="line"><span class="keyword">Automatic</span> <span class="keyword">merge</span> <span class="keyword">failed</span>; fix conflicts and then <span class="keyword">commit</span> the result.</div></pre></td></tr></table></figure>
<p>So that’s fun. If you look at the file it is a bit scary because your code is all messy and jacked up. Git will display &lt;&lt;&lt;&lt;&lt; and &gt;&gt;&gt;&gt;&gt; denoting where the two branches conflict.</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</div><div class="line"><span class="regexp">//</span> random changes on master branch</div><div class="line">gulp.src(<span class="string">'./client/templates/*.jade'</span>)</div><div class="line">  .pipe(jade())</div><div class="line">  .pipe(gulp.dest(<span class="string">'./build/templates'</span>))</div><div class="line">  .pipe(minify())</div><div class="line">  .pipe(gulp.dest(<span class="string">'./build/minified_templates'</span>));</div><div class="line"></div><div class="line">=======</div><div class="line"></div><div class="line">gulp.src(<span class="string">'client/js/**/*.js'</span>) <span class="regexp">//</span> Matches <span class="string">'client/js/somedir/somefile.js'</span> and resolves `base` to `client<span class="regexp">/js/</span>`</div><div class="line">  .pipe(minify())</div><div class="line">  .pipe(gulp.dest(<span class="string">'build'</span>));  <span class="regexp">//</span> Writes <span class="string">'build/somedir/somefile.js'</span></div><div class="line"></div><div class="line">gulp.src(<span class="string">'client/js/**/*.js'</span>, &#123; base: <span class="string">'client'</span> &#125;)</div><div class="line">  .pipe(minify())</div><div class="line">  .pipe(gulp.dest(<span class="string">'build'</span>));  <span class="regexp">//</span> Writes <span class="string">'build/js/somedir/somefile.js'</span></div><div class="line">  </div><div class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; develop</div></pre></td></tr></table></figure>
<p>Until recently I would edit this file manually and commit my changes. Today we’ll use the git mergetool tool.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">git mergetool</div><div class="line"></div><div class="line">This message is displayed because 'merge.tool<span class="string">' is not configured.</span></div><div class="line">See 'git mergetool <span class="comment">--tool-help' or 'git help config' for more details.</span></div><div class="line"><span class="string">'git mergetool'</span> will <span class="keyword">now</span> attempt <span class="keyword">to</span> <span class="keyword">use</span> one <span class="keyword">of</span> the <span class="keyword">following</span> tools:</div><div class="line">opendiff tortoisemerge emerge vimdiff</div><div class="line">Merging:</div><div class="line">play.js</div><div class="line"></div><div class="line"><span class="keyword">Normal</span> <span class="keyword">merge</span> conflict <span class="keyword">for</span> <span class="string">'play.js'</span>:</div><div class="line">  &#123;<span class="keyword">local</span>&#125;: modified <span class="keyword">file</span></div><div class="line">  &#123;remote&#125;: modified <span class="keyword">file</span></div><div class="line">Hit <span class="keyword">return</span> <span class="keyword">to</span> <span class="keyword">start</span> <span class="keyword">merge</span> resolution tool (opendiff):</div></pre></td></tr></table></figure>
<p>I use opendiff cause it gives you a GUI. Another tool is called vimdiff. I always get stuck in Vim and don’t like using it cause I’m afraid. Use opendiff. Hit enter.</p>
<p><img src="/content/images/2015/04/Screen-Shot-2015-04-23-at-8-22-13-PM.png" alt=""></p>
<p>Now you will see the two files and how they differ. Use the arrow keys to select left or right. I will select the right. Then save (File &gt; Save or command + S) then quit (File &gt; Quit or command + Q). Back in the terminal you’ll see some stuff.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">git mergetool</div><div class="line"></div><div class="line">This message is displayed because 'merge.tool<span class="string">' is not configured.</span></div><div class="line">See 'git mergetool <span class="comment">--tool-help' or 'git help config' for more details.</span></div><div class="line"><span class="string">'git mergetool'</span> will <span class="keyword">now</span> attempt <span class="keyword">to</span> <span class="keyword">use</span> one <span class="keyword">of</span> the <span class="keyword">following</span> tools:</div><div class="line">opendiff tortoisemerge emerge vimdiff</div><div class="line">Merging:</div><div class="line">play.js</div><div class="line"></div><div class="line"><span class="keyword">Normal</span> <span class="keyword">merge</span> conflict <span class="keyword">for</span> <span class="string">'play.js'</span>:</div><div class="line">  &#123;<span class="keyword">local</span>&#125;: modified <span class="keyword">file</span></div><div class="line">  &#123;remote&#125;: modified <span class="keyword">file</span></div><div class="line">Hit <span class="keyword">return</span> <span class="keyword">to</span> <span class="keyword">start</span> <span class="keyword">merge</span> resolution tool (opendiff): </div><div class="line"><span class="number">2015</span><span class="number">-04</span><span class="number">-23</span> <span class="number">20</span>:<span class="number">21</span>:<span class="number">49.350</span> FileMerge[<span class="number">3018</span>:<span class="number">303</span>] Invalid color <span class="keyword">System</span>, labelColor (<span class="keyword">warning</span> given <span class="keyword">only</span> once)</div><div class="line"><span class="number">2015</span><span class="number">-04</span><span class="number">-23</span> <span class="number">20</span>:<span class="number">21</span>:<span class="number">49.516</span> FileMerge[<span class="number">3018</span>:<span class="number">303</span>] Unable <span class="keyword">to</span> <span class="keyword">load</span> platform <span class="keyword">at</span> <span class="keyword">path</span> /Applications/Xcode.app/<span class="keyword">Contents</span>/Developer/Platforms/iPhoneOS.platform</div><div class="line"><span class="number">2015</span><span class="number">-04</span><span class="number">-23</span> <span class="number">20</span>:<span class="number">21</span>:<span class="number">49.518</span> FileMerge[<span class="number">3018</span>:<span class="number">303</span>] Unable <span class="keyword">to</span> <span class="keyword">load</span> platform <span class="keyword">at</span> <span class="keyword">path</span> /Applications/Xcode.app/<span class="keyword">Contents</span>/Developer/Platforms/iPhoneSimulator.platform</div><div class="line"></div><div class="line">git <span class="keyword">status</span></div><div class="line"></div><div class="line"><span class="keyword">On</span> branch <span class="keyword">master</span></div><div class="line">All conflicts <span class="keyword">fixed</span> but you <span class="keyword">are</span> still merging.</div><div class="line">  (<span class="keyword">use</span> <span class="string">"git commit"</span> <span class="keyword">to</span> conclude <span class="keyword">merge</span>)</div><div class="line"></div><div class="line">Changes <span class="keyword">to</span> be committed:</div><div class="line"></div><div class="line">	modified:   play.js</div><div class="line"></div><div class="line">Untracked files:</div><div class="line">  (<span class="keyword">use</span> <span class="string">"git add &lt;file&gt;..."</span> <span class="keyword">to</span> <span class="keyword">include</span> <span class="keyword">in</span> what will be committed)</div><div class="line"></div><div class="line">	play.js.orig</div></pre></td></tr></table></figure>
<p>Congrats you have resolved the merge conflict. We still have to commit our changes. Also notice a new (untracked) file was created. This is the same file when the merge conflict was first created, so you have both versions of the code. If multiple files conflict multiple .orig files will be generated. Delete this file and make the commit of the resolved merge.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm play<span class="selector-class">.js</span><span class="selector-class">.orig</span></div></pre></td></tr></table></figure>
<p>I made a comment to play.js. Then I committed the changes</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">add</span><span class="bash"> -A</span></div><div class="line">git commit -m <span class="string">'merge the two branches'</span></div></pre></td></tr></table></figure>
<p>Finally we can delete the develop branch and check that it is gone!</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">git</span> <span class="keyword">branch </span>-d develop </div><div class="line"><span class="symbol">Deleted</span> <span class="keyword">branch </span>develop (was fca53f8).</div><div class="line"></div><div class="line"><span class="symbol">git</span> <span class="keyword">branch</span></div><div class="line">* master</div></pre></td></tr></table></figure>
<p>Ultimately the develop commit shows up on the commit history of our master branch. There is another way to do this using <code>git rebase</code>. I’ll save that fun for later</p>
<p>Check out the full git history here:</p>
<p><a href="https://github.com/jasonshark/mergeConflicting/commits/master" target="_blank" rel="external">https://github.com/jasonshark/mergeConflicting/commits/master</a></p></div></article><a onclick="Intercom('show')" class="chat-link">Thoughts or questions? Chat now.<nav class="pagination"><a href="/2015/10/20/On-Insurrection/" title="On Insurrection" class="btn-default entry-pagination__link entry-pagination__link--prev">Prev</a></nav></a></div></div></div></main><footer class="footer"><div class="container"><div class="row"><div class="col-sm-3"></div><div class="col-sm-3"></div><div class="col-sm-3"><h4>Connect</h4><ul><li> <a target="_blank" href="https://github.com/connor11528">GitHub</a></li><li> <a target="_blank" href="https://www.linkedin.com/in/connorleech">LinkedIn</a></li><li> <a target="_blank" href="https://twitter.com/connor11528">Twitter</a></li></ul></div><div class="col-sm-3"><h4>Inquiries</h4><ul><li> <a href="mailto:connorleech@gmail.com">connorleech@gmail.com</a></li></ul></div></div></div></footer><!-- vendor--><script src="/bower_components/jquery/dist/jquery.min.js"></script><script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/bower_components/wow/dist/wow.min.js"></script><script src="/bower_components/jquery-easing/jquery.easing.min.js"></script><script src="/bower_components/jquery-color/jquery.color.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/ScrollMagic.min.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/plugins/debug.addIndicators.min.js"></script><script src="/bower_components/vivus/dist/vivus.min.js"></script><!-- require modules--><script src="/js/require.js"></script><script src="/js/app.js"></script><!-- analytics--><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-76214412-1', 'auto');
ga('send', 'pageview');</script></body></html>