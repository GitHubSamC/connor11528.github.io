<!DOCTYPE html><html lang="en"><head><meta name="author" content="Connor Leech"><title>Set up drf to play well with angular templates</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="cleartype" content="on"><meta name="MobileOptimized" content="320"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="description" content="Connor is a Web Developer based near San Francisco specializing in PHP, Javascript, Serverless and Node.js"><meta name="keywords" content="laravel, aws, javascript, php, developer, software engineer, web development, software, node.js, serverless, lambda, san francisco, bay area, east bay, vue, vuejs, vue.js, vue 2, laravel 5, amazon web services"><meta name="zipcode" content="94501"><meta name="city" content="Alameda"><meta name="state" content="California"><meta name="country" content="United States"><meta name="language" content="EN"><meta property="og:site_name" content="Connor Leech"><!-- Vendor Fonts--><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/bower_components/animate.css/animate.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css?family=Yantramanav" rel="stylesheet"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries--><!-- WARNING: Respond.js doesn't work if you view the page via file://--><!--if lt IE 9script(src='https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js')
script(src='https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js')
--><link rel="alternate" href="/atom.xml" title="config.title" type="application/rss2.xml"><link rel="stylesheet" href="/css/main.css"><script type="text/javascript">window.intercomSettings = {
  app_id: "m4bciby9"
};
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/m4bciby9';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script></head><body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" class="post"><!-- Nav--><nav role="navigation" class="navbar navbar-custom navbar-fixed-top"><div class="container"><div class="navbar-header"><a href="/" class="navbar-brand"><img src="/images/employbl_logo.svg" style="height:100px; width:100px;"></a><button type="button" data-toggle="collapse" data-target=".navbar-main-collapse" class="navbar-toggle"><i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse navbar-left navbar-main-collapse"></div><div class="collapse navbar-collapse navbar-right navbar-main-collapse"><ul class="nav navbar-nav"><li><a href="/blog" class="page-scroll">Blog</a></li><li><a href="/#about" class="page-scroll">About</a></li></ul></div></div></nav><main id="content"><div id="archive" class="container"><div class="row"> <div class="col-xs-12 col-md-8 col-md-offset-2"><article class="post"><div class="row"><div class="col-md-10 col-md-offset-1"><h1 class="post-title">Set up drf to play well with angular templates</h1></div></div><div class="row"><div class="post-meta"><h5><span></span><span class="date"> - Oct 24, 2015</span></h5></div></div><div class="post-body"></p>
<p>Create an app with django rest framework (drf) that uses angular.js on the frontend. This app will be built from the <a href="https://github.com/jasonshark/django-drf-starter-project" target="_blank" rel="external">django-drf-starter-project</a>. If you are curious about how the django-drf-starter-project was built you can view the <a href="https://coderwall.com/p/ympo6g/create-a-starter-template-for-working-with-django-rest-framework?p=1&amp;q=" target="_blank" rel="external">tutorial here</a>.</p>
<p>The full <a href="https://github.com/jasonshark/django-drf-angular-starter-project" target="_blank" rel="external">source code is here</a></p>
<p><img src="http://media.giphy.com/media/mxDZecDOOsWCA/giphy.gif" alt="Let&#39;s get started"></p>
<h3 id="Create-the-project"><a href="#Create-the-project" class="headerlink" title="Create the project"></a>Create the project</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> git@github.com:jasonshark/django-drf-starter-project.git</span></div><div class="line"><span class="meta">$</span><span class="bash"> mv django-drf-starter-project django-drf-angular-starter-project</span></div><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> django-drf-angular-starter-project</span></div></pre></td></tr></table></figure>
<p>This downloads the code from part one and renames the project to angular name.</p>
<h3 id="Set-up-virtual-environment"><a href="#Set-up-virtual-environment" class="headerlink" title="Set up virtual environment"></a>Set up virtual environment</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> ~/.bash_profile</span></div><div class="line"><span class="meta">$</span><span class="bash"> mkvirtualenv django-drf-angular-starter-project <span class="comment"># OR $ workon django-drf-angular-starter-project if you've already created the virtual environment</span></span></div><div class="line"><span class="meta">$</span><span class="bash"> lsvirtualenv</span></div><div class="line"><span class="meta">$</span><span class="bash"> pip install -r requirements.txt</span></div></pre></td></tr></table></figure>
<p>On my computer I have to source .bash_profile. I’m lazy and haven’t fixed this. Hopefully you have <a href="https://virtualenvwrapper.readthedocs.org/en/latest/" target="_blank" rel="external">virtualenvwrapper</a> set up properly on your own machine. The last step installs django and django rest framework from requirements.txt.</p>
<h3 id="Modify-view"><a href="#Modify-view" class="headerlink" title="Modify view"></a>Modify view</h3><p>In the views last time we used django templates, now we want angular to handle the front end. Django will provide one template (<code>jsframework/templates/jsframework/base.html</code>). The rest of our frontend code will be stored in <code>jsframework/static/templates</code>. Angular will access this using <a href="https://github.com/angular-ui/ui-router" target="_blank" rel="external">ui-router</a>.</p>
<p>Send the base template </p>
<p><strong>jsframework/views.py:</strong>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(request)</span>:</span></div><div class="line">    <span class="keyword">return</span> render(request, <span class="string">'jsframework/base.html'</span>)</div></pre></td></tr></table></figure></p>
<p>Then in base.html modify it to load angular and use angular views. Delete the django template tags, add:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">'drf-angular'</span>&gt;</span></div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ui-view</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.15/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.15/angular-ui-router.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="Write-angular"><a href="#Write-angular" class="headerlink" title="Write angular"></a>Write angular</h3><p><img src="http://cdn.meme.am/instances/500x/62550074.jpg" alt="don&#39;t get carried away"></p>
<p>Create an app, routes and a controller:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'drf-angular'</span>, [</div><div class="line">	<span class="string">'ui.router'</span></div><div class="line">]);</div><div class="line"></div><div class="line">app.config(<span class="function"><span class="keyword">function</span><span class="params">($stateProvider, $urlRouterProvider)</span></span>&#123;</div><div class="line">	$stateProvider</div><div class="line">		.state(<span class="string">'home'</span>, &#123;</div><div class="line">			url: <span class="string">'/'</span>,</div><div class="line">			templateUrl: <span class="string">'/static/templates/home.html'</span>,</div><div class="line">			controller: <span class="string">'MainCtrl'</span></div><div class="line">		&#125;);</div><div class="line"></div><div class="line">	$urlRouterProvider.otherwise(<span class="string">'/'</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">app.controller(<span class="string">'MainCtrl'</span>, <span class="function"><span class="keyword">function</span><span class="params">($scope)</span></span>&#123;</div><div class="line">	$scope.test = <span class="string">"I come from the angularz"</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>All of our angular templates will live in <code>jsframework/static/templates</code>. Reference them using the path specified in <code>templateUrl</code>.</p>
<p>All our routing will have <code>/#/</code>. Also we have not invented any models or serializers, but we’ve set up a server and handling angular on the frontend.</p>
<p>The full <a href="https://github.com/jasonshark/django-drf-angular-starter-project" target="_blank" rel="external">source code is here</a></p></div></article><a onclick="Intercom('show')" class="chat-link">Thoughts or questions? Chat now.<nav class="pagination"><a href="/2015/11/29/Code-samples-to-guide-you-through-the-React-ecosystem/" title="Code samples to guide you through the React ecosystem" class="btn-default entry-pagination__link entry-pagination__link--prev">Prev</a><a href="/2015/10/24/deploy-django-to-aws-part-2-hosting-files-on-S3/" title="Deploy Django to AWS part 2 - Hosting Files on S3" class="btn-default entry-pagination__link entry-pagination__link--next">Next</a></nav></a></div></div></div></main><footer class="footer"><div class="container"><div class="row"><div class="col-sm-3"></div><div class="col-sm-3"></div><div class="col-sm-3"><h4>Connect</h4><ul><li> <a target="_blank" href="https://github.com/connor11528">GitHub</a></li><li> <a target="_blank" href="https://www.linkedin.com/in/connorleech">LinkedIn</a></li><li> <a target="_blank" href="https://twitter.com/connor11528">Twitter</a></li></ul></div><div class="col-sm-3"><h4>Inquiries</h4><ul><li> <a href="mailto:connorleech@gmail.com">connorleech@gmail.com</a></li></ul></div></div></div></footer><!-- vendor--><script src="/bower_components/jquery/dist/jquery.min.js"></script><script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/bower_components/wow/dist/wow.min.js"></script><script src="/bower_components/jquery-easing/jquery.easing.min.js"></script><script src="/bower_components/jquery-color/jquery.color.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/ScrollMagic.min.js"></script><script src="/bower_components/scrollmagic/scrollmagic/minified/plugins/debug.addIndicators.min.js"></script><script src="/bower_components/vivus/dist/vivus.min.js"></script><!-- require modules--><script src="/js/require.js"></script><script src="/js/app.js"></script><!-- analytics--><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-76214412-1', 'auto');
ga('send', 'pageview');</script></body></html>